
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Monocurl | Learn</title>

		<!-- Meta  -->
		<meta charset="UTF-8">
		<meta name="description" content="Monocurl is a desktop application designed to create mathematically-defined slideshows and videos.">
		<meta name="keywords" content="Monocurl, math, animation, presentations, slideshows">
		<meta name="author" content="Manu Bhat">

		<link rel="icon" href="/img/monocurl_icon.png">

		<!-- CSS -->
		<link rel="stylesheet" href="/css/main.css">
		<link rel="stylesheet" href="/css/lessons.css">

		
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
            <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
        

		<!-- JS -->
		
            <script defer>
                hljs.highlightAll();
            </script>
        
	</head>
    
	<!-- Main -->
	<body>
		<nav>
			<a id='monocurl-title' href="/"> Monocurl </a> 
			
			<div class="spacer"> </div>

			<a class="navlink active" href="/learn/0_What_is_Monocurl">           Learn    </a>
			<a class="navlink " href="/docs/%20camera">     Docs     </a>
			<a class="navlink " href="/examples">        Examples </a>
			<a class="navlink " href="/credits">         Credits  </a>
		</nav>

		<main>
    <aside><h1> Learn </h1><a href="0_What_is_Monocurl" class="">0 What is Monocurl</a><a href="1_Monocurl_Language" class="">1 Monocurl Language</a><a href="2_Meshes" class="current">2 Meshes</a><a href="3_Animation_Basics" class="">3 Animation Basics</a><a href="4_More_Animation_Basics" class="">4 More Animation Basics</a><a href="5_Iterator_Follower_Paradigm" class="">5 Iterator Follower Paradigm</a><a href="6_Interpolation_Animations" class="">6 Interpolation Animations</a><a href="7_Tagging_Mechanics" class="">7 Tagging Mechanics</a><a href="8_Editor_Tips_and_Advice" class="">8 Editor Tips and Advice</a><a href="9_Future_Works" class="">9 Future Works</a></aside><div id="content"><h1>2. Meshes in Monocurl</h1>
<p>We'll now talk about meshes. Meshes are the objects that we see on screen.</p>
<p>The optional sections discuss some of the decisions behind Monocurl, but are not that practical so feel free to skim them.</p>
<h2>2.1 (Optional) Why meshes?</h2>
<p>By meshes, we mean a collection of triangles, lines, and dots. Meshes are sometimes thought of as a set of points, with each point having an associated color. In many computer graphics contexts, Bezier curves are used instead of the meshes we just talked about. The decision to use meshes primarily comes as a way to make all screen objects the same type, which is harder to do with Bezier curves. On the other hand, there are instances where meshes are much less smooth than Bezier curves, which is undesirable.</p>
<p>For instance, the following would require many Bezier curve objects, but can be done in a single mesh.</p>
<p><img alt="Color Grid" src="/img/lessons/color_grid.png" /></p>
<h2>2.2 Mesh-Trees</h2>
<p>Typically, we want to consider not just a single mesh, but a collection of them. This is where mesh-trees come in.</p>
<p>Formally, a mesh-tree is defined recursively. A mesh is considered a mesh-tree. A vector of mesh-trees is also considered a mesh-tree. Informally, we can think of a mesh-tree as just a list of meshes, that might have similar such lists inside of them. Example (assuming all the variables are meshes): <code class="language-swift">{mesh_a, mesh_b, {{{{mesh_c}}}}, {mesh_d, {mesh_e}}}</code>.</p>
<p>To those who ask why we can't just use a flat vector, note that mesh-trees allow us to be sloppy with the structure of our variables, which makes programming much easier. It also provides some sort of abstraction where we can ignore the exact details of how functions structure their returned mesh-trees. For instance, notice the following simple example where the <code class="language-swift">baloons</code> vector is not a flat list:</p>
<pre><code class="language-swift">func Balloon(position) = identity:
    let head = Circle:
        center: position
        radius: 0.5
        tag: {}
        stroke: BLACK

    let string = Line:
        start: head
        end: vec_sub(position, {0, 2, 0})
        tag: {}
        stroke: BLACK

    element: {head, string}

var balloons = {}
balloons += Balloon:    
    position: {-1, 0, 0}
balloons += Balloon:    
    position: {1, 0, 0}

/* at this point balloons has the following structure: */
/* {{head_1, string_1}, {head_2, string_2}} */
</code></pre>
<p><img alt="Balloons" src="/img/lessons/balloons.png" /></p>
<p>Most library functions dealing with meshes allow you to input an entire mesh-tree. Operations on a mesh-tree simply operate on all the meshes contained within the tree.</p>
<h2>2.3 Primitive-Operator Model</h2>
<p>The philosophy behind Monocurl is that we have primitive meshes and operators. Both categories of meshes are generally created using functors. Also, note that Monocurl uses a right-handed 3D coordinate system, which means you'll generally have to specify a z-coordinate even if you're doing 2D scenes.</p>
<p>Primitive meshes are meshes that you can create directly (i.e. no prerequisite meshes needed). Here are some common examples:</p>
<ul>
<li><a href="/docs/Circle">Circle</a> is a simple geometric circle</li>
<li><a href="/docs/Tex">Tex</a> can be used to render latex equations</li>
<li><a href="/docs/ColorGrid">ColorGrid</a> displays a bunch of rectangles according to a user-provided color functoin</li>
<li><a href="/docs/Axis2d">Axis2d</a> is helpful in graphing scenes</li>
</ul>
<p>Operator meshes (or more accurately, operators on meshes) take in one or more mesh-trees, and spit out a new a mesh-tree. Here are a few examples (you can find more in the documentation section):</p>
<ul>
<li><a href="/docs/Shifted">Shifted</a> translates a mesh-tree by a certain delta</li>
<li><a href="/docs/Rotated">Rotated</a> rotates a mesh-tree along a given axis</li>
<li><a href="/docs/Centered">Centered</a> translates the mesh-tree so that its center is placed at the given location</li>
<li><a href="/docs/PointMapped">PointMapped</a> moves every single vertex in the mesh-tree to a new point using the given transformation function</li>
<li><a href="/docs/XStack">XStack</a> arranges a series of meshes in the x direction</li>
</ul>
<p>To create complex scenes, you have to think about the constiuent parts, and how each own can be written as a pipeline of primitives and operators. Here's a simple example and the result:</p>
<pre><code class="language-swift">/* helper function, takes in number of lines and radius */
func Cardiod(n, r) = identity:
    var ret = {}
    ret += Circle:
        center: ORIGIN
        radius: r
        tag: {}
        stroke: LIGHT_GRAY

    func theta_to_point(theta) = {r * cos(theta), r * sin(theta), 0}
    for i in 0 :&lt; n
        let next = mod(i * 2, n)
        let org_theta = TAU * i / n
        let new_theta = TAU * next / n
        ret += Line:
            start: theta_to_point(org_theta)
            end: theta_to_point(new_theta)
            tag: {}
            stroke: BLACK

    element: ret

/* create 9 raw cardiods */
let raw_cards = map:
    v: 1 :&lt; 10
    f(x): Cardiod:
        n: 2 * x + 1
        r: 0.25

/* use operators to position them */
var cards = Centered:
    /* for simple operators it can be okay to use functions */
    mesh: XStack(raw_cards)
    at: ORIGIN
</code></pre>
<p>Result:</p>
<p><img alt="Cardiods" src="/img/lessons/cardiods.png" /></p>
<p>Some final, important points. Most library primitive meshes will take in parameters for a color of some sort and the tag. We'll talk about tags later, but for color, this should be a vector of 4 numbers each in the interval 0 to 1, representings the red, green, blue, and alpha channels respectfully.</p>
<h2>2.4 Following Along</h2>
<p>To follow along and finally play around with meshes, simply create a new scene in the Monocurl editor, and in the <code class="language-swift">slide_1</code> section, add the code for creating the meshes (such as the example above). Unfortunately, you can't just copy paste code into the editor directly (yet), but the silver lining is that typing it out helps you learn better (this is discussed more in lesson 8).</p>
<p>For now, you can add the following at the bottom of the code to see the results on screen. We'll explain what this does in the future when we talk about animations. </p>
<pre><code class="language-swift">play += Show:
    mesh&amp;: cards
    sticky: 0
</code></pre>
<p>For instance, the full cardiod example should look something like this in the editor (you might also have to set the background to <code class="language-swift">WHITE</code>).</p>
<p><img alt="Cardiods" src="/img/lessons/cardiod_code.png" /></p>
<h2>2.5 Practice</h2>
<p>Finally, you can try playing around with Monocurl! We still can't do animations yet, but as a challenge, try creating the following:</p>
<p><img alt="Practice example" src="/img/lessons/practice_mesh.png" /></p>
<p>Hint, you can make the previous using just the following three meshes and operators (and a bit of math):</p>
<ul>
<li><a href="/docs/Square">Square</a></li>
<li><a href="/docs/Rotated">Rotated</a></li>
<li><a href="/docs/Scaled">Scaled</a></li>
</ul>
<p>First get the placements right, then aim for the colors.</p>
<h2>2.7 Conclusion</h2>
<p>This sections covered the basics of meshes. The point isn't that you know all meshes by now, but rather you have a good enough idea that it's easy to learn. We definitely recommend going to the docs page and exploring existing options. In particular, look out for the ones with a star, as those are pretty useful.</p>
<p>Also, hopefully you can see the importance of creating your own functions from the very few examples we gave. As scenes get more complex, functions are of even more importance.</p>
<h2>2.8 (Optional) Remarks</h2>
<p>I dont really like positioning (and think it gets pretty redundant), and there are some stuff to be improved. But overall, I think meshes are good enough for the beta release.</p></div>
		</main>

		<footer>
			<div id="footer-legal"> 
				Copyright &copy Monocurl 2023. All rights reserved. 
			</div>

			<ul id="footer-links">
				<li> <a href="https://discord.com/invite/7g94JR3SAD">           Discord       </a> </li>
				<li> <a href="https://www.youtube.com/channel/monocurl">        YouTube       </a> </li>
				<li> <a href="https://github.com/monocurl/monocurl">			Source        </a> </li>
				<li> <a href="https://github.com/monocurl/monocurl.github.io">  Website Build </a> </li>
			</ul>
		</footer>
	</body>
</html>
    